{"version":3,"file":"ngx-vcard.umd.js","sources":["../../../projects/ngx-vcard/src/lib/types/vCardEncoding.ts","../../../projects/ngx-vcard/src/lib/helpers.ts","../../../projects/ngx-vcard/src/lib/types/parameter/BasicPropertyParameters.type.ts","../../../projects/ngx-vcard/src/lib/ngx-vcard.formatter.ts","../../../projects/ngx-vcard/src/lib/download-vcard.directive.ts","../../../projects/ngx-vcard/src/lib/ngx-vcard.module.ts","../../../projects/ngx-vcard/src/public_api.ts","../../../projects/ngx-vcard/src/ngx-vcard.ts"],"sourcesContent":["export enum VCardEncoding {\n  none = '',\n  utf8 = ';CHARSET=utf-8'\n}\n","/**\n * Encodes string\n */\nexport function e(value: string | undefined): string {\n  if (value) {\n    if (typeof value !== 'string') {\n      value = '' + value;\n    }\n    return value\n      .replace(/\\n/g, '\\n')\n      .replace(/,/g, ',')\n      .replace(/;/g, ';');\n  }\n  return '';\n}\n\n/**\n * Return new line characters\n */\nexport function nl(): string {\n  return '\\n';\n}\n","import { Address } from '../vCard';\nimport { e } from '../../helpers';\n\n/**\n * A property can have attributes associated with it.\n * These \"property parameters\" contain meta-information about the property or the property value.\n * @link https://tools.ietf.org/html/rfc6350#section-5\n */\nexport interface BasicPropertyParameters {\n  /**\n   * The LANGUAGE property parameter is used to identify data in multiple languages.\n   * @kind Property: LANGUAGE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.1\n   *\n   */\n  language?: string;\n  /**\n   * The VALUE parameter is OPTIONAL, used to identify the value type (data type) and format of the value.\n   * @kind Property: VALUE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.2\n   */\n  value?:\n    | 'text'\n    | 'uri'\n    | 'date'\n    | 'time'\n    | 'date-time'\n    | 'date-and-or-time'\n    | 'timestamp'\n    | 'boolean'\n    | 'integer'\n    | 'float'\n    | 'utc-offset'\n    | 'language-tag';\n  /**\n   * The PREF parameter is OPTIONAL and is used to indicate that the corresponding instance of a property is preferred by the vCard author.\n   * Its value MUST be an integer between 1 and 100 that quantifies the level of preference.\n   * Lower values correspond to a higher level of preference, with 1 being most preferred.\n   * @kind Property: PREF\n   * @link https://tools.ietf.org/html/rfc6350#section-5.3\n   */\n  pref?:\n    | 1\n    | 2\n    | 3\n    | 4\n    | 5\n    | 6\n    | 7\n    | 8\n    | 9\n    | 10\n    | 11\n    | 12\n    | 13\n    | 14\n    | 15\n    | 16\n    | 17\n    | 18\n    | 19\n    | 20\n    | 21\n    | 22\n    | 23\n    | 24\n    | 25\n    | 26\n    | 27\n    | 28\n    | 29\n    | 30\n    | 31\n    | 32\n    | 33\n    | 34\n    | 35\n    | 36\n    | 37\n    | 38\n    | 39\n    | 40\n    | 41\n    | 42\n    | 43\n    | 44\n    | 45\n    | 46\n    | 47\n    | 48\n    | 49\n    | 50\n    | 51\n    | 52\n    | 53\n    | 54\n    | 55\n    | 56\n    | 57\n    | 58\n    | 59\n    | 60\n    | 61\n    | 62\n    | 63\n    | 64\n    | 65\n    | 66\n    | 67\n    | 68\n    | 69\n    | 70\n    | 71\n    | 72\n    | 73\n    | 74\n    | 75\n    | 76\n    | 77\n    | 78\n    | 79\n    | 80\n    | 81\n    | 82\n    | 83\n    | 84\n    | 85\n    | 86\n    | 87\n    | 88\n    | 89\n    | 90\n    | 91\n    | 92\n    | 93\n    | 94\n    | 95\n    | 96\n    | 97\n    | 98\n    | 99\n    | 100;\n  /**\n   * The ALTID parameter is used to \"tag\" property instances as being alternative representations of the same logical property.\n   * For example, translations of a property in multiple languages generates multiple property instances\n   * having different LANGUAGE parameter that are tagged with the same ALTID value.\n   * @kind Property: ALTID\n   * @link https://tools.ietf.org/html/rfc6350#section-5.4\n   */\n  altid?: string;\n  /**\n   * The PID parameter is used to identify a specific property among multiple instances.\n   * @kind Property: PID\n   * @link https://tools.ietf.org/html/rfc6350#section-5.5\n   */\n  pid?: string[];\n  /**\n   * The TYPE parameter has multiple, different uses.\n   * In general, it is a way of specifying class characteristics of the associated property.\n   * @kind Property: TYPE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.6\n   */\n  type?:\n    | Array<'work' | 'home' | 'text' | 'voice' | 'fax' | 'cell' | 'video' | 'pager' | 'textphone'>\n    | 'work'\n    | 'home'\n    | 'text'\n    | 'voice'\n    | 'fax'\n    | 'cell'\n    | 'video'\n    | 'pager'\n    | 'textphone';\n  /**\n   * The MEDIATYPE parameter is used with properties whose value is a URI.\n   * @kind Property: MEDIATYPE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.7\n   */\n  mediatype?: string;\n  /**\n   * The CALSCALE parameter is used to define the calendar system in which a date or date-time value is expressed.\n   * @kind Property: CALSCALE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.8\n   */\n  calscale?: 'gregorian';\n  /**\n   * The \"sort-as\" parameter is used to specify the string to be used for national-language-specific sorting.\n   * Without this information, sorting algorithms could incorrectly sort this vCard within a sequence of sorted vCards.\n   * @kind Property: SORT-AS\n   * @link https://tools.ietf.org/html/rfc6350#section-5.9\n   */\n  sortas?: string[];\n  /**\n   * The GEO parameter can be used to indicate global positioning information that is specific to an address.\n   * @kind Property: GEO\n   * @link https://tools.ietf.org/html/rfc6350#section-5.10\n   */\n  geo?: string;\n  /**\n   * The TZ parameter can be used to indicate time zone information that is specific to an address.\n   * @kind Property: TZ\n   * @link https://tools.ietf.org/html/rfc6350#section-5.11\n   */\n  timezone?: string;\n}\n\nexport function propertyToVCardString(property: BasicPropertyParameters): string {\n  let str = '';\n  if (property.language) {\n    str += ';LANGUAGE=' + e(property.language);\n  }\n  if (property.value) {\n    str += ';VALUE=' + e(property.value);\n  }\n  if (property.altid) {\n    str += ';ALTID=' + e(property.altid);\n  }\n  if (property.pid) {\n    str += ';PID=' + property.pid.map(s => e(s)).join(',');\n  }\n  if (property.type) {\n    if (Array.isArray(property.type)) {\n      if (property.type.length === 1) {\n        str += ';TYPE=' + property.type[0];\n      } else {\n        str += ';TYPE=\"' + property.type.map(s => s.toLowerCase()).join(',') + '\"';\n      }\n    } else {\n      str += ';TYPE=' + property.type;\n    }\n  }\n  if (property.mediatype) {\n    str += ';MEDIATYPE=' + e(property.mediatype);\n  }\n  if (property.pref) {\n    str += ';PREF=' + property.pref;\n  }\n  if (property.calscale) {\n    str += ';CALSCALE=' + e(property.calscale);\n  }\n  if (property.sortas) {\n    str += ';SORT-AS=\"' + property.sortas.map(s => e(s)).join(',') + '\"';\n  }\n  if (property.geo) {\n    str += ';GEO=' + e(property.geo);\n  }\n  if (property.timezone) {\n    str += ';TZ=' + e(property.timezone);\n  }\n\n  return str;\n}\n\nexport function isPropertyWithParameters(object: any): object is { value?: string; param?: BasicPropertyParameters } {\n  const test = <{ value?: string; param?: BasicPropertyParameters }>object;\n  if (test == null || test.param == null || test.value == null) {\n    return false;\n  }\n  return (\n    test.param.language !== undefined ||\n    test.param.value !== undefined ||\n    test.param.pref !== undefined ||\n    test.param.altid !== undefined ||\n    test.param.pid !== undefined ||\n    test.param.type !== undefined ||\n    test.param.mediatype !== undefined ||\n    test.param.calscale !== undefined ||\n    test.param.sortas !== undefined ||\n    test.param.geo !== undefined ||\n    test.param.timezone !== undefined\n  );\n}\n\nexport function isPropertyWithParametersAddressValue(\n  object: any\n): object is { value?: Address; param?: BasicPropertyParameters } {\n  const test = <{ value?: Address; param?: BasicPropertyParameters }>object;\n  if (test == null || test.param == null || test.value == null) {\n    return false;\n  }\n  return (\n    test.param.language !== undefined ||\n    test.param.value !== undefined ||\n    test.param.pref !== undefined ||\n    test.param.altid !== undefined ||\n    test.param.pid !== undefined ||\n    test.param.type !== undefined ||\n    test.param.mediatype !== undefined ||\n    test.param.calscale !== undefined ||\n    test.param.sortas !== undefined ||\n    test.param.geo !== undefined ||\n    test.param.timezone !== undefined\n  );\n}\n","import { VCard, Address } from './types/vCard';\nimport { VCardEncoding } from './types/vCardEncoding';\nimport {\n  isPropertyWithParameters,\n  propertyToVCardString,\n  BasicPropertyParameters,\n  isPropertyWithParametersAddressValue,\n} from './types/parameter/BasicPropertyParameters.type';\nimport { nl, e } from './helpers';\n\nexport class VCardFormatter {\n  public static getVCardAsBlob(vCard: VCard, encoding: VCardEncoding = VCardEncoding.none): Blob {\n    const data = VCardFormatter.getVCardAsString(vCard, encoding);\n    return new Blob([data], { type: 'text/vcard' });\n  }\n\n  /**\n   * Get formatted vCard in VCF format\n   */\n  public static getVCardAsString(vCard: VCard, encodingPrefix: VCardEncoding = VCardEncoding.none): string {\n    if (!vCard.version) {\n      vCard.version = '4.0';\n    }\n    const majorVersion = getMajorVersion(vCard.version);\n\n    let formattedVCardString = '';\n    formattedVCardString += 'BEGIN:VCARD' + nl();\n    formattedVCardString += 'VERSION:' + vCard.version + nl();\n\n    // const encodingPrefix = '';\n    let formattedName = '';\n    if (vCard.name == null) {\n      vCard.name = {};\n    }\n\n    let nameArray = [];\n    if (vCard.formattedName != null) {\n      nameArray = [vCard.formattedName.firstNames, vCard.formattedName.addtionalNames, vCard.formattedName.lastNames];\n    } else {\n      nameArray = [vCard.name.firstNames, vCard.name.addtionalNames, vCard.name.lastNames];\n    }\n\n    formattedName = nameArray.filter((string) => string != null).join(' ');\n\n    formattedVCardString += 'FN' + encodingPrefix + ':' + e(formattedName) + nl();\n\n    formattedVCardString +=\n      'N' +\n      encodingPrefix +\n      ':' +\n      [\n        e(vCard.name.lastNames),\n        e(vCard.name.firstNames),\n        e(vCard.name.addtionalNames),\n        e(vCard.name.namePrefix),\n        e(vCard.name.nameSuffix),\n      ].join(';') +\n      nl();\n\n    if (vCard.nickname && majorVersion >= 3) {\n      formattedVCardString += 'NICKNAME' + encodingPrefix + ':' + e(vCard.nickname) + nl();\n    }\n\n    if (vCard.gender) {\n      if (vCard.gender.sex) {\n        formattedVCardString += 'GENDER:' + e(vCard.gender.sex);\n        if (vCard.gender.text) {\n          formattedVCardString += ';' + e(vCard.gender.text);\n        }\n        formattedVCardString += nl();\n      } else {\n        formattedVCardString += 'GENDER:;' + e(vCard.gender.text) + nl();\n      }\n    }\n\n    if (vCard.uid) {\n      formattedVCardString += 'UID' + encodingPrefix + ':' + e(vCard.uid) + nl();\n    }\n\n    if (vCard.birthday) {\n      formattedVCardString += 'BDAY:' + YYYYMMDD(vCard.birthday) + nl();\n    }\n\n    if (vCard.anniversary) {\n      formattedVCardString += 'ANNIVERSARY:' + YYYYMMDD(vCard.anniversary) + nl();\n    }\n\n    if (vCard.language) {\n      vCard.language.forEach((language) => {\n        if (isPropertyWithParameters(language)) {\n          formattedVCardString += 'LANG' + propertyToVCardString(language.param) + ':' + e(language.value) + nl();\n        } else {\n          formattedVCardString += 'LANG:' + e(language) + nl();\n        }\n      });\n    }\n\n    if (vCard.organization) {\n      if (isPropertyWithParameters(vCard.organization)) {\n        formattedVCardString +=\n          'ORG' + propertyToVCardString(vCard.organization.param) + ':' + e(vCard.organization.value) + nl();\n      } else {\n        formattedVCardString += 'ORG' + encodingPrefix + ':' + e(vCard.organization) + nl();\n      }\n    }\n\n    if (vCard.address) {\n      vCard.address.forEach((address) => {\n        if (isPropertyWithParametersAddressValue(address)) {\n          formattedVCardString +=\n            'ADR' +\n            propertyToVCardString(address.param as BasicPropertyParameters) +\n            getFormattedAddress(address.value) +\n            nl();\n        } else {\n          formattedVCardString += 'ADR' + getFormattedAddress(address) + nl();\n        }\n      });\n    }\n\n    if (vCard.telephone) {\n      vCard.telephone.forEach((element) => {\n        if (!isPropertyWithParameters(element)) {\n          element = {\n            value: element,\n            param: {\n              type: 'voice',\n            },\n          };\n        }\n        formattedVCardString +=\n          'TEL' + propertyToVCardString(element.param as BasicPropertyParameters) + ':' + e(element.value) + nl();\n      });\n    }\n\n    if (vCard.email) {\n      vCard.email.forEach((email) => {\n        if (isPropertyWithParameters(email)) {\n          formattedVCardString += 'EMAIL' + propertyToVCardString(email.param) + ':' + e(email.value) + nl();\n        } else {\n          formattedVCardString += 'EMAIL:' + e(email) + nl();\n        }\n      });\n    }\n\n    if (vCard.title) {\n      formattedVCardString += 'TITLE' + encodingPrefix + ':' + e(vCard.title) + nl();\n    }\n\n    if (vCard.logo) {\n      if (isPropertyWithParameters(vCard.logo)) {\n        formattedVCardString += 'LOGO' + propertyToVCardString(vCard.logo.param) + ':' + e(vCard.logo.value) + nl();\n      } else {\n        formattedVCardString += 'LOGO:' + e(vCard.logo) + nl();\n      }\n    }\n\n    if (vCard.photo) {\n      if (isPropertyWithParameters(vCard.photo)) {\n        formattedVCardString += 'PHOTO' + propertyToVCardString(vCard.photo.param) + ';' + e(vCard.photo.value) + nl();\n      } else {\n        formattedVCardString += 'PHOTO;' + e(vCard.photo) + nl();\n      }\n    }\n\n    if (vCard.homeFax) {\n      vCard.homeFax.forEach(function (number) {\n        if (+majorVersion >= 4) {\n          formattedVCardString += 'TEL;VALUE=uri;TYPE=\"fax,home\":tel:' + e(number) + nl();\n        } else {\n          formattedVCardString += 'TEL;TYPE=HOME,FAX:' + e(number) + nl();\n        }\n      });\n    }\n\n    if (vCard.workFax) {\n      vCard.workFax.forEach(function (number) {\n        if (+majorVersion >= 4) {\n          formattedVCardString += 'TEL;VALUE=uri;TYPE=\"fax,work\":tel:' + e(number) + nl();\n        } else {\n          formattedVCardString += 'TEL;TYPE=WORK,FAX:' + e(number) + nl();\n        }\n      });\n    }\n\n    if (vCard.role) {\n      formattedVCardString += 'ROLE' + encodingPrefix + ':' + e(vCard.role) + nl();\n    }\n\n    if (vCard.url) {\n      let urlNotSet = true;\n      if (hasProp(vCard.url, 'home')) {\n        formattedVCardString += 'URL;type=HOME' + encodingPrefix + ':' + e((vCard.url as { home: string }).home) + nl();\n        urlNotSet = false;\n      }\n\n      if (hasProp(vCard.url, 'work')) {\n        formattedVCardString += 'URL;type=WORK' + encodingPrefix + ':' + e((vCard.url as { work: string }).work) + nl();\n        urlNotSet = false;\n      }\n      if (urlNotSet) {\n        formattedVCardString += 'URL' + encodingPrefix + ':' + e(vCard.url as string) + nl();\n      }\n    }\n\n    if (vCard.note) {\n      formattedVCardString += 'NOTE' + encodingPrefix + ':' + e(vCard.note) + nl();\n    }\n\n    if (vCard.socialUrls) {\n      for (const key in vCard.socialUrls) {\n        if (vCard.socialUrls.hasOwnProperty(key) && vCard.socialUrls[key]) {\n          formattedVCardString +=\n            'X-SOCIALPROFILE' + encodingPrefix + ';TYPE=' + key + ':' + e(vCard.socialUrls[key]) + nl();\n        }\n      }\n    }\n\n    if (vCard.source) {\n      if (isPropertyWithParameters(vCard.source)) {\n        formattedVCardString +=\n          'SOURCE' + encodingPrefix + propertyToVCardString(vCard.source.param) + ':' + e(vCard.source.value) + +nl();\n      } else {\n        formattedVCardString += 'SOURCE' + encodingPrefix + ':' + e(vCard.source) + nl();\n      }\n    }\n    if (vCard.rev) {\n      formattedVCardString += 'REV:' + vCard.rev + nl();\n    }\n    formattedVCardString += 'END:VCARD' + nl();\n    return formattedVCardString;\n  }\n}\n\n/**\n * Get formatted photo\n * @param photoType       Photo type (PHOTO, LOGO)\n * @param url             URL to attach photo from\n * @param mediaType       Media-type of photo (JPEG, PNG, GIF)\n */\nfunction getFormattedPhoto(\n  photoType: 'PHOTO' | 'LOGO',\n  url: string,\n  mediaType: string,\n  base64: boolean,\n  majorVersion: number\n) {\n  let params;\n\n  if (+majorVersion >= 4) {\n    params = base64 ? ';ENCODING=b;MEDIATYPE=image/' : ';MEDIATYPE=image/';\n  } else if (+majorVersion === 3) {\n    params = base64 ? ';ENCODING=b;TYPE=' : ';TYPE=';\n  } else {\n    params = base64 ? ';ENCODING=BASE64;' : ';';\n  }\n\n  const formattedPhoto = photoType + params + mediaType + ':' + e(url) + nl();\n  return formattedPhoto;\n}\n\n/**\n * Get formatted address\n */\nfunction getFormattedAddress(address: Address) {\n  return (\n    (address.label ? ';LABEL=\"' + e(address.label) + '\"' : '') +\n    ':' +\n    e(address.postOfficeBox) +\n    ';' +\n    e(address.extendedAddress) +\n    ';' +\n    e(address.street) +\n    ';' +\n    e(address.locality) +\n    ';' +\n    e(address.region) +\n    ';' +\n    e(address.postalCode) +\n    ';' +\n    e(address.countryName)\n  );\n}\n\n/**\n * Convert date to YYYYMMDD format\n */\nfunction YYYYMMDD(date: Date | undefined): string {\n  if (!date) {\n    return '';\n  }\n  return date.toLocaleDateString('se').replace(/\\D/g, ''); // use Swedish date format\n}\n\n/**\n * Get major version from version string\n */\nexport function getMajorVersion(version: string): number {\n  const majorVersionString = version ? version.slice(0, 1) : '4';\n  if (!isNaN(+majorVersionString)) {\n    return Number.parseInt(majorVersionString);\n  }\n  return 4;\n}\n\n/**\n * Determines if the object has the Property\n * @param obj Object to test\n * @param property Property to check\n */\nfunction hasProp(obj: any, property: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, property);\n}\n","import { Directive, ElementRef, HostListener, Input } from '@angular/core';\nimport { VCardFormatter } from './ngx-vcard.formatter';\nimport { VCard } from './types/vCard';\nimport { VCardEncoding } from './types/vCardEncoding';\n\nconst ERROR_MESSAGE =\n  \"ngx-vcard: No input specified. You must specify either 'vcdDownloadVCard' or 'generateVCardFunction'\";\n@Directive({\n  selector: '[vcdDownloadVCard]',\n})\nexport class DownloadVCardDirective {\n  constructor(private element: ElementRef) {}\n  // This property is always specified as it is the selector,\n  // which means it can't be undefined\n  @Input('vcdDownloadVCard')\n  vCard!: VCard | '';\n  @Input('generateVCardFunction')\n  generateVCardFunction: (() => VCard) | '' | undefined;\n  @Input() public encoding: VCardEncoding = VCardEncoding.none;\n\n  @HostListener('click')\n  onclick() {\n    if (this.vCard == '') {\n      if (\n        this.generateVCardFunction != undefined &&\n        this.generateVCardFunction != ''\n      ) {\n        this.vCard = this.generateVCardFunction();\n      } else {\n        throw new Error(ERROR_MESSAGE);\n      }\n    }\n    const blob = VCardFormatter.getVCardAsBlob(this.vCard, this.encoding);\n    let filename = 'vCard';\n    if (this.vCard.name != null) {\n      filename =\n        this.vCard.name.firstNames + ' ' + this.vCard.name.lastNames + '.vcf';\n    }\n    this.download(blob, filename);\n  }\n\n  private download(data: Blob, filename: string) {\n    // IE 11\n    if (window.navigator.msSaveBlob) {\n      window.navigator.msSaveBlob(data, filename);\n    } else {\n      const a: HTMLAnchorElement = document.createElement('a');\n      const url = URL.createObjectURL(data);\n      (a as any).style.display = 'none';\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }\n  }\n\n  ngOnInit() {\n    if (\n      this.vCard == '' &&\n      (this.generateVCardFunction == '' ||\n        this.generateVCardFunction == undefined)\n    ) {\n      throw new Error(ERROR_MESSAGE);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { DownloadVCardDirective } from './download-vcard.directive';\n\n@NgModule({\n  imports: [],\n  declarations: [DownloadVCardDirective],\n  exports: [DownloadVCardDirective]\n})\nexport class NgxVcardModule { }\n","/*\n * Public API Surface of ngx-vcard\n */\n\nexport * from './lib/ngx-vcard.module';\nexport * from './lib/ngx-vcard.formatter';\nexport * from './lib/download-vcard.directive';\nexport * from './lib/types/vCard';\nexport * from './lib/types/vCardEncoding';\nexport * from './lib/types/parameter/BasicPropertyParameters.type';\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["VCardEncoding","Directive","Input","HostListener","NgModule"],"mappings":"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"}